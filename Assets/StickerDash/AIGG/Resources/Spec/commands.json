{
  "commands": [
    {
      "name": "straight-flex",
      "regex": "^\\s*(?:append\\s+)?straight\\s+(\\d+(?:\\.\\d+)?)\\s*m\\s*(?:step\\s+(\\d+(?:\\.\\d+)?))?\\s*$",
      "ops": [
        {
          "op": "set",
          "path": "$.args.distance",
          "value": "$1:float"
        },
        {
          "op": "set",
          "path": "$.args.step",
          "value": "$2:float"
        },
        {
          "op": "custom",
          "path": "$.args",
          "value": "sanitize_nulls"
        },
        {
          "op": "custom",
          "path": "$.exec",
          "value": "AppendStraight($.args.distance,$.args.step)"
        }
      ]
    },
    {
      "name": "arc-flex",
      "regex": "^\\s*(?:append\\s+)?(?:arc|curve)\\s+(left|right)\\s+(\\d+(?:\\.\\d+)?)\\s*(?:deg|°)\\s*$",
      "ops": [
        {
          "op": "set",
          "path": "$.args.side",
          "value": "$1"
        },
        {
          "op": "set",
          "path": "$.args.deg",
          "value": "$2:float"
        },
        {
          "op": "custom",
          "path": "$.args",
          "value": "sanitize_nulls"
        },
        {
          "op": "custom",
          "path": "$.exec",
          "value": "AppendArc($.args.side,$.args.deg)"
        }
      ]
    },
    {
      "name": "append-gap",
      "regex": "^\\s*(?:append\\s+)?gap\\s+(\\d+(?:\\.\\d+)?)\\s*m\\s*$",
      "ops": [
        {
          "op": "set",
          "path": "$.args.length",
          "value": "$1:float"
        },
        {
          "op": "custom",
          "path": "$.args",
          "value": "sanitize_nulls"
        },
        {
          "op": "custom",
          "path": "$.exec",
          "value": "AppendGap($.args.length)"
        }
      ]
    }
  ]
}